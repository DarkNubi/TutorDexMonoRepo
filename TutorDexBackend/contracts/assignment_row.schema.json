{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://tutordex.local/contracts/assignment_row.schema.json",
  "title": "TutorDex Assignment Row",
  "description": "Assignment data contract returned by /assignments API. See docs/signals.md for detailed field schemas.",
  "type": "object",
  "additionalProperties": true,
  "required": [
    "id",
    "external_id",
    "message_link",
    "agency_display_name",
    "agency_telegram_channel_name",
    "learning_mode",
    "assignment_code",
    "academic_display_text",
    "address",
    "postal_code",
    "postal_code_estimated",
    "nearest_mrt",
    "region",
    "nearest_mrt_computed",
    "nearest_mrt_computed_line",
    "nearest_mrt_computed_distance_m",
    "lesson_schedule",
    "start_date",
    "time_availability_note",
    "rate_min",
    "rate_max",
    "rate_raw_text",
    "signals_subjects",
    "signals_levels",
    "signals_specific_student_levels",
    "subjects_canonical",
    "subjects_general",
    "canonicalization_version",
    "status",
    "created_at",
    "published_at",
    "last_seen",
    "freshness_tier",
    "distance_km",
    "distance_sort_key",
    "postal_coords_estimated"
  ],
  "properties": {
    "id": { "type": "integer" },
    "external_id": { "type": ["string", "null"] },
    "message_link": { "type": ["string", "null"] },
    "agency_display_name": { "type": ["string", "null"] },
    "agency_telegram_channel_name": { "type": ["string", "null"] },
    "learning_mode": { "type": ["string", "null"] },
    "assignment_code": { "type": ["string", "null"] },
    "academic_display_text": { "type": ["string", "null"] },
    "address": { "type": "array", "items": { "type": "string" } },
    "postal_code": { "type": "array", "items": { "type": "string" } },
    "postal_code_estimated": { "type": "array", "items": { "type": "string" } },
    "nearest_mrt": { "type": "array", "items": { "type": "string" } },
    "region": { "type": ["string", "null"] },
    "nearest_mrt_computed": { "type": ["string", "null"] },
    "nearest_mrt_computed_line": { "type": ["string", "null"] },
    "nearest_mrt_computed_distance_m": { "type": ["integer", "null"] },
    "lesson_schedule": { "type": "array", "items": { "type": "string" } },
    "start_date": { "type": ["string", "null"] },
    "time_availability_note": { "type": ["string", "null"] },
    "rate_min": { "type": ["integer", "null"] },
    "rate_max": { "type": ["integer", "null"] },
    "rate_raw_text": { "type": ["string", "null"] },
    "tutor_types": { "type": ["array", "null"], "items": { "type": "object" } },
    "rate_breakdown": { "type": ["object", "null"], "additionalProperties": { "type": "object" } },
    "signals_subjects": { "type": "array", "items": { "type": "string" } },
    "signals_levels": { "type": "array", "items": { "type": "string" } },
    "signals_specific_student_levels": { "type": "array", "items": { "type": "string" } },
    "subjects_canonical": { "type": "array", "items": { "type": "string" } },
    "subjects_general": { "type": "array", "items": { "type": "string" } },
    "canonicalization_version": { "type": ["integer", "null"] },
    "status": { "type": ["string", "null"] },
    "created_at": { "type": ["string", "null"] },
    "published_at": { "type": ["string", "null"] },
    "last_seen": { "type": ["string", "null"] },
    "freshness_tier": { "type": ["string", "null"] },
    "distance_km": { "type": ["number", "null"] },
    "distance_sort_key": { "type": ["number", "null"] },
    "postal_coords_estimated": { "type": ["boolean", "null"] }
  }
}
